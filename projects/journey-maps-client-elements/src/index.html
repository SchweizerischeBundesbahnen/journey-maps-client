<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>JourneyMapsClientElements</title>
    <!-- Relative path will be ignored -->
    <!-- Do not change. Will be replaced by Docker build -->
    <base href="REPLACE_ME">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
      <style type="text/css">
          .main {
              padding: 20px;
          }
          .map-container {
              height: 70vh;
              box-shadow: 0 0 10px rgb(0 0 0 / 25%);
              border-radius: 2px;
          }
      </style>
  </head>
  <body>
    <script>
      var map;
      var client = document.createElement('journey-maps-client');
      client.language = 'de';
      client.apiKey = 'e500c71b8c83c1cfb2170608582ae9c8';
      client.zoomLevel = 7.5;
      client.showLevelSwitch = true;
      client.mapCenter = [7.4391326448171196, 46.948834547463086];
      client.scrollZoom = false;
      client.markers = [
        {
          id: 'home',
          title: 'Home Office',
          subtitle: 'My home is my castle',
          position: [7.296515, 47.069815],
          category: 'INFO',
          infoBlocks: [
            {
              type: 'TEXT',
              title: 'Lorem Ipsum',
              content: 'Lorem ipsum dolor sit amet, consectetur adipisici elit'
            },
            {
              type: 'BUTTON',
              title: 'Bavaria Ipsum',
              url: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'
            },
          ]
        },
        {
          id: 'work',
          title: 'Office',
          subtitle: 'SBB Wylerpark',
          position: [7.446450, 46.961409],
          category: 'MISSED-CONNECTION',
          infoBlocks: [
            {
              type: 'BUTTON',
              title: 'Show menu plan',
              url: 'https://zfv.ch/en/microsites/sbb-restaurant-wylerpark/menu-plan'
            },
          ]
        },
      ];
      client.allowOneFingerPan = false; // prevent overlay asking for the use of two fingers
      client.popup = true;

      document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('container').appendChild(client);
        document.getElementById('zoom-level').appendChild(document.createTextNode(client.zoomLevel));
        document.getElementById('selected-marker-id').appendChild(document.createTextNode(undefined));
      });

      client.addEventListener('zoomLevelChanged', function (event) {
        const zoomLevelSpan = document.getElementById('zoom-level');
        zoomLevelSpan.replaceChild(document.createTextNode(event.detail), zoomLevelSpan.firstChild);
      });

      client.addEventListener('selectedMarkerIdChange', function (event) {
        const selectedMarkerId = document.getElementById('selected-marker-id');
        if (selectedMarkerId.firstChild) {
          selectedMarkerId.replaceChild(document.createTextNode(event.detail), selectedMarkerId.firstChild);
        }
      });

      client.addEventListener('mapReady', function (event) {
        map = event.detail;
      });

      function setSelecteMarkerId(id) {
        client.selectedMarkerId = id;
      }
    </script>

<div class="main">
    <div id="container"></div>
    <div>
      <ul>
        <li>
          <button onclick="setSelecteMarkerId('home')">select 'Home Office' Marker</button>
          <button onclick="setSelecteMarkerId(undefined)">unselect all Markers</button>
        </li>
        <li>Selected Marker ID: <span id="selected-marker-id"></span></li>
        <li>Zoom Level: <span id="zoom-level"></span></li>
        <li>
          <button onclick="map.zoomIn();">Zoom In</button>
          <button onclick="map.zoomOut();">Zoom Out</button>
        </li>
        <li>
          <button onclick="client.moveNorth()">Move North</button>
          <button onclick="client.moveEast()">Move East</button>
          <button onclick="client.moveSouth()">Move South</button>
          <button onclick="client.moveWest()">Move West</button>
        </li>
      </ul>
    </div>
</div>
</body>
</html>

<div class="infoboxContainer" *ngIf="shouldRender()" @showHideTrigger>
  <ng-container
    *ngTemplateOutlet="infoBoxTemplate ? infoBoxTemplate : defaultTemplate;context:getTemplateContext()">
  </ng-container>

  <button class="close" (click)="closeClicked.emit()" [attr.aria-label]="closeLabel" data-testid="close-button">
    <sbb-icon svgIcon="kom:circle-cross-medium" class="sbb-icon-fit"></sbb-icon>
  </button>
</div>

<ng-template #defaultTemplate>
  <div class="title">{{selectedMarker.title}}</div>
  <div class="subtitle">{{selectedMarker.subtitle}}</div>
  <ng-container *ngFor="let infoBlock of getInfoBlocks()">
    <div class="infobox">
      <rokas-text-info-box *ngIf="isTextInfoBlock(infoBlock)" [infoBlock]="infoBlock"></rokas-text-info-box>
      <rokas-button-info-box *ngIf="isButtonInfoBlock(infoBlock)" [infoBlock]="infoBlock"></rokas-button-info-box>
      <rokas-html-info-box *ngIf="isHtmlInfoBlock(infoBlock)" [infoBlock]="infoBlock"></rokas-html-info-box>
    </div>
  </ng-container>
</ng-template>
